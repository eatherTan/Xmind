# HTTP的发展和演变

### **目录**

1. #### HTTP 与 HTTPs
2. #### HTTP1.1 、HTTP2 、HTTP3 演变



## Https的优点

HTTP最凸出的优点是 【简单、灵活、可扩展性高、应用灵活和广泛】

#### 1.简单

HTTP的基本格式是header +  body，头部信息是key-value格式的，易于理解，降低了学习和使用的门槛。

#### 2.灵活和易于扩展

HTTP协议里的各类请求方法、URI/URL、状态码、头部等每个组成都没有被固定死，都允许开发人员自定义和扩充。

同时HTTP是工作在应用层的（OSI第七层），<u>他的下层可以随意变化？？</u>

HTTPs 就是在HTTP与TCP之间增加了SSL/TLS安全传输层，HTTP/3甚至把TCP层换成了UDP和QUIC。

### 3.应用广泛

HTTP的应用特别广泛，手机的各种APP、电脑的浏览器都是使用HTTP协议。

> 但是HTTP也有一定缺点



### 缺点

1.HTTP是无状态的

HTTP协议是无状态的，有**好处**也有**坏处**。

- 服务器不会记忆HTTP的状态，不需要花费额外的资源来记录状态信息，能够减轻服务器的负担。
- 无状态会带来的一定的困扰，因为当在有关联操作，需要记录用户状态信息时，这是HTTP没有保存用户信息，这时就需要不断请求用户信息接口。如：登录->查询商品->添加商品到购物车->下单，这每一步都需要调用一遍接口拿到用户信息。这会造成流程不连贯、中断了。

为了解决这种困扰，有很多种解决方式，较简单的的cookie技术。

**Cookie** 通过在请求和响应报文中写入Cookie信息来控制客户端的状态。

- <u>在客户端第一次请求后会下发一个装有客户信息的【小贴纸】，后续客户端请求服务器时，带上【小贴纸】，服务器就知道用户信息了，保存了用户状态。</u>

2.HTTP是明文传输的

- 明文传输是方便阅读的，方便了开发人员直接调试。可通过F12或抓包方式获取传输内容。
- 信息易被盗取：但是明文传输也是极其不安全的，敏感的用户信息或者涉及金额密码等重要私密信息，都极容易被盗取。
- 信息易被篡改、劫持：黑客可以修改通信内容。
- 冒充风险：黑客可以冒充他人身份参与通信。



针对上面的缺点，Https解决了HTTP不安全的问题，在HTTP与TCP之间使用了SSL/TLS协议。

HTTPS的特点是

1. 内容加密：采用混合加密技术，中间者无法直接查看明文内容
2. 验证身份：通过数字证书验证



混合加密方式的必要性：

1. 如果采用对称加密算法，不同客户端、服务器都需要保存各自的密钥。密钥数量多、维护成本高。另外密钥容易被劫持，不法分子容易得到密钥。
   - 如果使用非对称加密方式的，公钥是公开的，黑客也会有公钥，所以黑客就可以对返回内容进行解密，获取传输内容。
   - 如果使用对称加密方式，发送端和服务器都需要保存好秘钥，然后使用秘钥来传输，少量服务器的话，使用此方法是可以的，可是当发送端、服务器数量多时，每个发送端和服务器的秘钥都需要保存并管理好，双方都需要维护大量的密钥，维护成本很高。

数字证书的内容：

- 数字证书包括加密后的服务器公钥、权威机构的信息、服务器域名、还有经过CA私钥签名后的证书内容数字摘要，签名计算方法以及证书对应的域名。

验证证书安全性的过程  - <u>好难懂</u>

- 1.当客户端收到这个证书以后，使用本地配置的权威机构的公钥对证书进行解密得到服务端的公钥和证书的数字签名，数字签名经过CA公钥解密得到证书信息摘要。
- 2.然后证书签名的方法计算一下当前证书的信息摘要，与收到的信息摘要作对比，如果一样，表示证书一定是服务器下发的，没有被中间人篡改过。因为中间人虽然有权威机构的公钥，能够解析证书内容并篡改，但是篡改完成之后中间人需要将证书重新加密，但是中间人没有权威机构的私钥，无法加密，强行加密只会导致客户端无法解密，如果中间人强行乱修改证书，就会导致证书内容和证书签名不匹配。


## HTTP/1.1 发展

#### 1.长连接

早起HTTP/1.0在性能上有一个很大的问题，每次发起一个请求，都要建立一次TCP连接（三次握手），增加了通信开销。

为了解决TCP连接造成的通信开销，HTTP/1.1提出了**长连接**的通信方式，也叫持久连接。这种方式的好处是减少了TCP连接的重复建立和断开所造成的额外开销。

长连接的特点是：只要任意一端没有明确提出断开连接，则保持TCP连接状态。











































































