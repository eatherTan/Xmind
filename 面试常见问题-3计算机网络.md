# 面试常见问题：3 - 计算机网络



> HTTP和HTTPS详解：https://juejin.im/post/5a030e326fb9a0450a66c8ea
>
> 关于 TCP/IP，必知必会的十个问题：https://juejin.im/post/598ba1d06fb9a03c4d6464ab


### http与https有何区别？
1.http是超文本传输协议，https是在http基础上，加了一层ssl协议、加密的传输协议
2.http的端口是80， https的端口是443
3.http是免费的，https是需要申请证书，需要一定费用的
4.http是无状态的，明文传输的，https是使用http + ssl 的具有安全性的、加密传输协议

### https是如何实现加密的？
HTTPS 加密保证安全性的过程：https://www.jianshu.com/p/671ebeddcf60

https是使用了SSL/TLS，证书技术、对称加密技术、非对称加密技术、摘要算法来实现安全性。

1. 客户端HTTPs的URL访问服务器，要求与Web服务器建立SSL连接
2. 服务器返回证书信息，包括服务器名称，公钥，这里客户端需要确认服务器的公钥是不是正确，发送一个字符串给服务器，服务器返回一个私钥加密后的信息，客户端再用公钥解密该字符串，如果和之前的字符串一样，说明服务器确实是密钥的持有者。
3. 客户端生成会话密钥：对称加密的密钥
4. 客户端使用公钥来加密密钥，并且发送给服务器
5. 服务器用私钥来解密该密钥，得到对称加密的密钥
6. Web端服务器利用密钥和服务器通信，进行数据传输

```
SSL在握手阶段依赖数字证书建立安全连接，数字证书包含一个非对称加密技术生成的公钥
```

### 什么是对称加密？ 非对称加密？
对称加密就是使用同一个密钥来进行加密和解密，常用的加密技术有DES, AES

非对称加密有两个密钥，一个公钥和私钥，是成对出现的。常见的非对称加密的技术有rsa

### 应用层有哪些协议？ 网络层有哪些协议？
应用层有HTTP，SMTP（邮件传输协议），TELNET，DNS域名解析协议，FTP文件传输协议

传输层： TCP，UDP

网络层：IP协议，ARP地址解析协议，ICMP网络控制管理协议， IGMP协议

### OSI 和 TCP/IP各层的结果和功能，都有哪些协议
1. 应用层的任务是通过应用进程之前的交互来完成特定网络应用。
1. 运输层的任务就是负责两台主机之前线程之间的通信提供数据传输服务
1. 网络层是为主机之间提供逻辑通信的，要做的事情有选择合适的网间路由和交换节点，确保数据及时传送。
1. 数据链路层是为分组交换网上的不同主机提供通信服务
1. 物理层是消除物理硬件之间的差别，确保数据可在各个物理层上传输，

这里可以看出网络层和运输层有明显的区别
	1。网络层是为主机之间提供逻辑通信的
	2。运输层为应用进程之间提供端到端的逻辑通信

### *TCP/IP三次握手过程
1. 发送端和服务器最开始都是关闭状态，发送端发送同步位SYN = 1标志 && 序号seq为x 的数据报给服务端，客户端处于同步-已发送状态
2. 服务端收报文以后，同意建立连接，返回同步位SYN=1 和确认为ACK=1；&& 序号seq为y，确认序号ack = x+1；的报文段给客户端，同时服务器更新为同步-收到的状态
3. 客户端收到以后返回确认，发送ACK=1，序号为seq=x+1, 确认序号 ack = y+1;同时状态更新为 已建立连接

### *TCP释放连接的四次挥手
1. 双方一开始都处于已建立连接状态
2. 发送端先向服务端发送释放连接的报文：报文的终止控制位FIN = 1， seq = x；并且此时发送端进入终止等待1 状态
3. 服务器收到报文后立即发出确认ACK=1，序号seq=y，确认号ack = x+1；并且服务端的状态是关闭等待状态
4. 发送端收到服务端的确认后就进入终止等待2状态，等待B发出的连接释放报文
5. 服务端发出释放连接的报文：FIN=1，ACK=1，seq=w, ack=u+1; 此时服务的状态更新为最后确认状态
6. 发送端收到服务端的确认报文以后，发出确认报文：ACK=1，seq=u+1; ack=w+1; 然后进入时间等待状态，最终关闭。

### tdp和udp都是哪一层的，有什么应用场景ftp、dns分别用的是哪个？
TCP和UDP都是运输层的

FTP用的是TCP，DNS用的是UDP


### 什么时候应该使用TCP？
当对网络通讯质量有要求的时候，比如：整个数据要准确无误的传递给对方，这往往用于一些要求可靠的应用，比如HTTP、HTTPS、FTP等传输文件的协议，POP、SMTP等邮件传输的协议。 

### 什么时候应该使用UDP？
当对网络通讯质量要求不高的时候，要求网络通讯速度能尽量的快，这时就可以使用UDP。或者对开销比较小要求的也可以使用UDP，因为UDP的首部只有8个字节，而TCP至少20个字节


### TCP 和 HTTP的区别
1. HTTP协议使用了面向连接的TCP协议，作为可靠传输的保证。HTTP本身是无连接的，TCP协议是面向连接的
2. HTTP的端口是80，HTTP是无状态的
3. TCP是面向字节流的；HTTP是面向文本的；
4. HTTP是面向事务的应用层协议。（面向事物就是指一系列的信息交换，而这一系列的信息交换是一个不可分割的整体，也就是说所有的信息交换的都完成，要么一次交换都不进行）
5. HTTP是应用层的协议，TCP的运输层的协议
6. HTTP的报文结构由请求行、首部行、实体主体组成；TCP的报文段由首部和数据部分组成


### DNS是什么？ 解析过程是怎么样的？
1. DNS是域名解析系统，把域名解析成IP地址。DNS的端口是53

解析过程：
1. 当一个应用进程需要把主机名解析为IP地址时，该应用进程就调用解析程序，并成为DNS的一个客户，把待解析的域名放在DNS请求报文中，以UDP用户数据报的方式发送给本地域名服务器。本地服务器查找域名后，把对应的IP地址放在响应报文中。
2. 使用递归查询或迭代查询的方式


### 怎么抓取HTTPS协议
1.设置https选项，抓取https请求
2.安装证书

### 说出请求接口中常见的返回状态码
- 200 请求成功
- 301 永久重定向
- 302 临时重定向
- 400 BadRequest，请求参数格式错误
- 403 forbidden 禁止访问
- 404 资源不存在
- 500 服务器内部错误

### POST和GET的区别
- Get请求参数在URL中，Post不是。GET请求参数放在URL中是明文传输的，相对来说GET请求比较不安全
- Get请求是无副作用的，Post请求有副作用，提交数据或修改数据
- Get请求在浏览器中是可以回退的，Post不可以
- Post请求没有长度限制，但是GET请求在有的浏览器中是有长度限制的1024字节

### HTTP请求报文与响应报文格式
请求报文：
- 请求行
- 首部
- 实体主体

响应报文：
- 状态行
- 首部
- 实体主体

### 什么是HTTP协议无状态协议?怎么解决HTTP协议无状态协议
HTTP是无状态的，当同一个用户第二次访问同一服务器上的同一页面时，服务器并不记得该用户，也不记得为该用户服务过多少次

1.使用HTTP1.1版本的协议，它使用持续连接，当服务器响应一段时间后，扔在一段时间内保持连接
2.使用cookie。由服务器响应后，浏览器就把用户信息保存在cookie中，cookie记录用户信息，在发送请求时，浏览器会自动带上cookie信息

### 常见的POST提交数据方式
application/json
text/xml
multipart/form-data
application/x-www-form-unlencoded

### HTTP协议学了哪几个版本？
1.0, 1.1, 2 这三个版本


### 从HTTP变化到HTTPS协议，测试点
1. 查看URL是否都变成了HTTPs
2. HTTPS加密+身份认证，接口响应速度，

### TCP首部格式？ UDP首部格式
UDP首部格式（共8个字节）：
1. 源端口 - 2个字节
2. 目的端口 - 2个字节
3. 长度 - 2个字节
4. 检验和 - 2个字节

TCP首部格式（共20个字节）：
1. 源端口 - 2个字节
2. 目的端口 - 2个字节
3. 序号 - 4个字节
4. 确认序号 - 4个字节
5. 偏移 + 保留 +  URG/ACK/PSH/RST/SYN/FIN   2个字节
6. 窗口 - 2个字节
7. 检验和 - 2个字节
8. 紧急指针 - 2个字节


fiddler 原理

https://mp.weixin.qq.com/s/c3gs44L0Q_JTeVuwnzRoNA